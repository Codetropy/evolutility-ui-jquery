<html xmlns="http://www.w3.org/1999/xhtml" >
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width,initial-scale=1">

    <meta name="keywords" content="UI Backbone model view open source metadata driven SPA single page app application CRUDBootstrap" />
    <meta name="description" content="Evolutility :: UI models for your Backbone models" /></head>

    <title>evolutility.js</title>
    <link href="dist/css/demo.css" rel="stylesheet" />
    <link href="dist/css/evolutility.min.css" rel="stylesheet" />
    <link id="bwCSS" href="dist/css/vendors.min.css" rel="stylesheet" />

    <script src="dist/vendors.min.js" type="text/javascript"></script>
    <script src="dist/evolutility.js" type="text/javascript"></script>
    <script src="demo/demo-ui.min.js" type="text/javascript"></script>
</head>

<body>

<div class="evo-header">
    <div class="evo-logo"><a href="index.html"><span>evol</span>utility<span>.js</span></a></div>
    <ul class="evo-head-links">
        <li><a href="demo/index.html">demo</a></li>
        <li><a href="doc/index.html">doc</a></li>
    </ul>
    <div class="clearfix"></div>
</div>
<a href="https://github.com/evoluteur/evolutility" class="forkMe" target="forkMe"><img alt="Fork me on GitHub" src="https://s3.amazonaws.com/github/ribbons/forkme_right_orange_ff7600.png"></a>
<div class="evo-title" >
    <h1 class="title1" style="color: white">UI models for your Backbone models</h1>
    <h1 class="title1"><span class="title2" >+ a set of Backbone views which can change form, volume and structure based on a UI-model.</span></h1>
</div>

<div class="evo-content">

    <p></p>

<h4>
    Evolutility is currently v0.2.1 and a work in progress on <a href="https://github.com/evoluteur/evolutility" target="ghe">GitHub</a>.
</h4>

    <div id="evol-views-params" >

        <div>UI Model:
            <select id="evolModel" class="form-control" style="width:auto">
                <option value="todo">To Do</option>
                <option value="contact">AddressBook</option>
                <option value="wine">Wine Cellar</option>
            </select>
        </div>

        <div>View:
            <select id="evolView" class="form-control" style="width:auto">
                <optgroup label="One = model">
                    <option value="view">View</option>
                    <option value="edit" selected="selected">Edit</option>
                    <option value="mini">Mini</option>
                    <option value="json">JSON</option>
                </optgroup>
                <optgroup label="Many = collection">
                    <option value="list">List</option>
                    <option value="badges">Badges</option>
                    <option value="charts">Charts</option>
                </optgroup>
                <optgroup label="Action">
                    <option value="filter">Filter</option>
                    <option value="export">Export</option>
                </optgroup>
            </select>
        </div>

        <p class="clearfix"></p>

    </div>


<div id="evol1"></div>

    <p></p>

    <p>For each Backbone model and collection, a single UI-model defines all view.</p>

    <p>UI models for the examples above:
        <a href="javascript:showUIdef2(todo_ui)">To Do</a>,
        <a href="javascript:showUIdef2(contacts_ui)">Addressbook</a>,
        <a href="javascript:showUIdef2(winecellar_ui)">Wine Cellar</a>.
        <small id="hide_def" style="display:none;"><a href="javascript:showUIdef2no()">[Hide]</a></small></p>
    </p>

    <div style="display:none;" id="uimodel"></div>


    <div class="blueBox">
        <h2>Demos</h2>
        <ul>
            <li><a href="demo/todo.html">todo</a></li>
            <li><a href="demo/contact.html">addressbook</a></li>
            <li><a href="demo/winecellar.html">winecellar</a></li>
        </ul>
    </div>

    <div class="blueBox">
        <h2>Documentation</h2>
        <ul>
            <li><a href="doc/ui-model.html">ui-model</a></li>
            <li><a href="doc/views.html">views</a></li>
            <li>&nbsp;</li>
            <li><a href="https://github.com/evoluteur/evolutility">GitHub</a></li>
        </ul>
    </div>
    <div class="clearfix"></div>

<p>License: GNU AGPLv3</p>

</div>

<div class="footer">&#169; 2014 Olivier Giulieri</div>


<script>

    var curView=null;

    function showUIdef2(uiModel){
        var $ui=$('#uimodel');
        $ui.html(Evol.UI.input.textMJSON('uimodel2', uiModel, 10))
                .slideDown();
        $('#hide_def').show();
    }

    function showUIdef2no(){
        $('#uimodel').slideUp();
        $('#hide_def').hide();
    }


    var viewClasses = {
        // One
        'view': Evol.ViewOne.View,
        'edit': Evol.ViewOne.Edit,
        'mini': Evol.ViewOne.Mini,
        'json': Evol.ViewOne.JSON,
        // Many
        'list': Evol.ViewMany.List,
        'badges': Evol.ViewMany.Badges,
        'charts': Evol.ViewMany.Charts,
        // Action
        'filter': Evol.ViewAction.Filter,
        'export': Evol.ViewAction.Export
        // UI Model
        //'uimodel': Evol.ViewAction.UI_Model,
        //'doc': Evol.ViewAction.Doc
    };

    function showView(){
        var $model=$('#evolModel'),
            $view=$('#evolView'),
            uiModel,
            sampleData,
            viewName=$view.val();

        switch($model.val()){
            case 'todo':
                uiModel=todo_ui;
                sampleData=todo_data;
                break;
            case 'contact':
                uiModel=contacts_ui;
                sampleData=contacts_data;
                break;
            case 'wine':
                uiModel=winecellar_ui;
                sampleData=winecellar_data;
                break;
        }
        switch(viewName){
            case 'todo':
                uiModel=todo_ui;
                break;
            case 'contact':
                uiModel=contacts_ui;
                break;
            case 'wine':
                uiModel=winecellar_ui;
                break;
        }

        var $e=$('<div data-eid="'+uiModel.id+'"></div>'),
            collec = new Backbone.Collection(sampleData),
            config={
                style: 'panel-primary',
                collection: collec,
                model: collec.models[0],
                modelClass: Backbone.Model,
                collectionClass: Backbone.Collection,
                uiModel: uiModel,
                title:'',
                el: $e,
                iconsPath:'demo/pix/'
            };

        $('#evol1').append($e);
        if(viewName==='filter'){
            config.fields=Evol.Dico.getFields(uiModel);
        }
        if(curView){
            curView.remove();
        }
        curView=new viewClasses[viewName](config)
                .render();
    }

    $(document).ready(function(){
        $('#evolModel,#evolView').on('change', function(evt){
            showView();
        });
        showView();
    });

</script>
</body>

</html>

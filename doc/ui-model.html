<!DOCTYPE html>
<html>
<head>
    <title>Meta Model</title>
    <link href="../dist/css/demo.css" rel="stylesheet" />
    <link href="../dist/css/evolutility.css" rel="stylesheet" />
    <link id="bwCSS" href="../dist/css/bootstrap.min.css" rel="stylesheet" />
</head>
<body>

<div class="evo-navbar">
    <div class="evol-logo"><a href="../index.html">evolutility.js</a></div>
    <ul class="evo-nav-tabs">
        <li><a href="../demo/index.html">demo</a></li>
        <li><a href="../doc/index.html" class="sel">documentation</a></li>
        <li><a href="https://github.com/evoluteur/evolutility" target="_new">GitHub</a></li>
    </ul>
    <div class="doc-links">
        <a href="ui-model.html" class="sel">ui-model</a> -
        <a href="views.html">views</a> -
        <a href="controller.html">controller</a>
    </div>
    <div class="clearfix"></div>
</div>

<ul style="float:right;padding:40px 5px;">
    <li><a href="#object">object</a></li>
    <li><a href="#field">field</a></li>
    <li><a href="#section">section</a></li>
    <li><a href="#sample">sample ui-models</a></li>
</ul>


<h1>ui-model</h1>

<p>Let's make a model for the UI the same way Backbone provides a model for the data.</p>

<p>This is not fully defined nor implemented yet but a work in progress based on <a href="http://www.codeproject.com/Articles/28636/Minimalist-Meta-Model-for-CRUD-Applications" target="evomm">Evolutility minimalist meta-model</a>.</p>


<section id="object">
<h2>object</h2>

<p>An "object" is the UI information added to the Backbone model.
This ui-model defines all <a href="views.html">views</a>.</p>



<table class="table table-bordered">
    <tbody><tr>
        <td style="width: 120px; ">entity<span class="evol-required">*</span>
        </td>
        <td>User's object name for the database object (for example: &quot;task&quot; for a
            to do list application).
        </td>
    </tr>
    <tr>
        <td>entities<span class="evol-required">*</span>
        </td>
        <td>Plural for <code>entity</code> (example &quot;tasks&quot; for the to do list).
        </td>
    </tr>
    <tr>
        <td>elements[]<span class="evol-required">*</span>
        </td>
        <td>
            Array of tabs or panels which contains fields.
        </td>
    </tr>
    <tr>
        <td>leadfield</td>
        <td>id of the field which value is the page title (when using option "$title"). Can also be a function taking model as a parameter.
            (example &quot;firstname&quot; or "function(model){return model.get('firstname')+' '+model.get('lastname')}").</td>
    </tr>
    <tr>
        <td>icon
        </td>
        <td>Filename of the records icon (same one for all records).
            <br />
            Example: <code>icon</code> =&quot;todo.png&quot;
        </td>
    </tr>
    <tr>
        <td>$title</td>
        <td>jQuery selector for an element outside of the View to show item main fild as a title on navigation.
            <br />
            Example: <code>$title</code>=&quot;#title&quot; </td>
    </tr>
    </tbody></table>

    <span class="evol-required">*</span>: required attribute.
</section>

<section id="field">
    <h2>field</h2>
    <p>Attributes in your Backbone model are mapped to fields in the UI.</p>

    <table class="table table-bordered">
        <tbody>

        <tr>
            <th colspan="2">Identity</th>
        </tr>
        <tr>
            <td>attribute </td>
            <td>Model attribute mapping to the field.
                If no value is provided for "attribute", the value of the attribute "id" is used.</td>
        </tr>
        <tr>
            <td>id<span class="evol-required">*</span></td>
            <td>Field Id in the UI.</td>
        </tr>
        <tr>
            <td>label<span class="evol-required">*</span>, labelone,<br /> labelmany
            </td>
            <td>Field title (in different views). Only <code>label</code> is mandatory and will be the default for all other modes if not specified.
            </td>
        </tr>
        <tr>
            <td>type<span class="evol-required">*</span>
            </td>
            <td>
                The type of the field in the UI.

                <ul class="indent list-unstyled">
                    <li><span data-id="#boolean"><img src="pix/dico/ft-bool.gif" alt="" class="Icon">boolean</span></li>
                    <li><span data-id="#color"><img src="pix/dico/ft-color.gif" alt="" class="Icon">color</span></li>
                    <li><span data-id="#date"><img src="pix/dico/ft-date.gif" alt="" class="Icon">date, datetime, time</span></li>
                    <li><span data-id="#decimal"><img src="pix/dico/ft-dec.gif" alt="" class="Icon">decimal, integer</span></li>
                    <li><span data-id="#document"><img src="pix/dico/ft-doc.gif" alt="" class="Icon">document</span></li>
                    <li><span data-id="#email"><img src="pix/dico/ft-email.gif" alt="" class="Icon">email, url</span></li>
                    <li><span data-id="#formula"><img src="pix/dico/ft-fn.gif" alt="" class="Icon">formula</span></li>
                    <li><span data-id="#html"><img alt="" class="Icon" src="pix/dico/ft-htm.gif">html (RTF)</span></li>
                    <li><span data-id="#image"><img src="pix/dico/ft-img.gif" alt="" class="Icon">image</span></li>
                    <li><span data-id="#lov"><img src="pix/dico/ft-lov.gif" alt="" class="Icon">lov (list of values)</span></li>
                    <li><span data-id="#money"><img src="pix/dico/ft-money.gif" alt="" class="Icon">money</span></li>
                    <li><span data-id="#text"><img src="pix/dico/ft-txt.gif" alt="" class="Icon">text</span></li>
                    <li><span data-id="#textmultiline"><img src="pix/dico/ft-txtml.gif" alt="" class="Icon">textmultiline</span></li>
                </ul>
            </td>
        </tr>

        <tr>
            <th colspan="2">Layout</th>
        </tr>
        <tr>
            <td >css
            </td>
            <td>CSS class name for the specific field.
            </td>
        </tr>
        <tr>
            <td>csslabel
            </td>
            <td>CSS class name for the specific field label (in modes Edit and View).
            </td>
        </tr>
        <tr>
            <td>format
            </td>
            <td>Field format (for fields of type boolean, date, decimal, or integer).
                <br />
                Example: <code>format</code>=&quot;'$'#,##0.00&quot;
            </td>
        </tr>
        <tr>
            <td>height
            </td>
            <td>Height of the field, in number of rows (default to 1 for all field except
                fields of type TextMultilines).
            </td>
        </tr>
        <tr>
            <td>help
            </td>
            <td>Help tooltip for the field (only used in Edit mode).
            </td>
        </tr>
        <tr>
            <td>img
            </td>
            <td>Image to display (for fields of type &quot;boolean&quot; or &quot;url&quot;) in Edit or View modes.
            </td>
        </tr>
        <tr>
            <td>width
            </td>
            <td><p>Width of the field in percentage of the Panel it belongs to.
                <br/>Default: 100%
            </p></td>
        </tr>


        <tr>
            <th colspan="2">Validation</th>
        </tr>
        <tr>
            <td>defaultvalue
            </td>
            <td>Default value for the field displayed while creating a new record.
            </td>
        </tr>
        <tr>
            <td>max</td>
            <td>Maximum value allowed for the field (depending on field type).</td>
        </tr>
        <tr>
            <td>maxlength</td>
            <td>Maximum number of characters allowed for the field value.
            </td>
        </tr>
        <tr>
            <td>min</td>
            <td>Minimum value allowed for the field (depending on field type).</td>
        </tr>
        <tr>
            <td>minlength</td>
            <td>Minimum number of characters allowed for the field value to be valid.
            </td>
        </tr>
        <tr>
            <td>regex
            </td>
            <td>Regular expression to validate the field value against.
            </td>
        </tr>
        <tr>
            <td>required
            </td>
            <td>Determines if the field is required for saving the record.
            </td>
        </tr>
        <tr>
            <td>jsvalidation</td>
            <td>Name of the Javascript custom method for the field validation (validation for required, min, max, type is automatically done).</td>
        </tr>


        <tr>
            <th colspan="2">Behavior</th>
        </tr>
        <tr>
            <td>link
            </td>
            <td>Forces the field to be displayed as a link to another web page. It can use
                the following variables @itemid, @userid, @fieldid.
            </td>
        </tr>
        <tr>
            <td>linklabel
            </td>
            <td>Display a sentence or an image as the link. Can also be a function (model)
            </td>
        </tr>
        <tr>
            <td>linktarget
            </td>
            <td>Directs to a new tab in the browser (HTML attribute "target").
            </td>
        </tr>
        <tr>
            <td>optional
            </td>
            <td>Filter condition to hide the field. Example: function(model){return model.get('type')=='integer';}
            </td>
        </tr>
        <tr>
            <td>readonly
            </td>
            <td>
                <code>readonly</code>=1 presents edition of the field. <code>
                readonly</code>=2 presents edition of the field, but allows typing in
                insertion.
            </td>
        </tr>
        <tr>
            <td>sortable
            </td>
            <td>Column can be sorted by the field value (using ViewMany).
            </td>
        </tr>
        <tr>
            <td>tooltip
            </td>
            <td>Tooltip when the mouse is over the field.
            </td>
        </tr>
        <tr>
            <td>viewcharts
            </td>
            <td>Determines if a chart of record grouped by the field is shown (using ViewMany in chart mode).
            </td>
        </tr>
        <tr>
            <td>viewmany, viewlist, <br/>
                viewcards, viewedit, <br/>
                viewmini, viewexport
            </td>
            <td>Determines if the field is available in specific views.
            </td>
        </tr>
        </tbody></table>
</section>

<section id="sections">
    <h2>sections</h2>
<p>Fields are grouped in panels and panels can be grouped in tabs. </p>


    <h3>panel</h3>
    <p>The <code>panel</code> element is used to visually group fields together on the screen.</p>

    <table class="table table-bordered">
        <tbody>
        <tr>
            <td>id<span class="evol-required">*</span></td>
            <td>Panel Id in the UI.</td>
        </tr>
        <tr>
            <td style="width: 120px; ">css
            </td>
            <td>CSS class for the panel. The default value is &quot;Panel&quot;.
            </td>
        </tr>
        <tr>
            <td>csslabel
            </td>
            <td>
                CSS class for the panel title. The default value is &quot;PanelLabel&quot;.
            </td>
        </tr>
        <tr>
            <td>elements[]
            </td>
            <td>
                Array of fields.
            </td>
        </tr>
        <tr>
            <td>label
            </td>
            <td>Panel title.
            </td>
        </tr>
        <tr>
            <td>optional
            </td>
            <td>
                Skips the panel from displaying, if every field contained is empty and
                optional (in View mode only).
            </td>
        </tr>
        <tr>
            <td>width
            </td>
            <td>Width of the panel in percentage of the total width of the form.<br />
                Example: <code>width</code>=&quot;100&quot; for the full width.
            </td>
        </tr>
        </tbody></table>


    <h3>panel-list</h3>
    <p>Similar to a panel but used to display a sub-collection.</p>

    <table class="table table-bordered">
        <tbody>
        <tr>
            <td>attribute<span class="evol-required">*</span></td>
            <td>Model attribute for the sub-collection.</td>
        </tr>
        <tr>
            <td>id<span class="evol-required">*</span></td>
            <td>Panel Id in the UI.</td>
        </tr>
        <tr>
            <td style="width: 120px; ">css
            </td>
            <td>CSS class for the panel. The default value is &quot;Panel&quot;.
            </td>
        </tr>
        <tr>
            <td>csslabel
            </td>
            <td>
                CSS class for the panel title. The default value is &quot;PanelLabel&quot;.
            </td>
        </tr>
        <tr>
            <td>elements[]
            </td>
            <td>
                Array of fields in the sub-collection.
            </td>
        </tr>
        <tr>
            <td>label
            </td>
            <td>Panel title.
            </td>
        </tr>
        <tr>
            <td>width
            </td>
            <td>Width of the panel in percentage of the total width of the form.<br />
                Example: <code>width</code>=&quot;100&quot; for the full width.
            </td>
        </tr>
        </tbody></table>

    <h3>tab</h3>
    <p>The <code>tab</code> element can be used to group panels together and view them a group at a time. This element is optional.</p>
    <table class="table table-bordered">
        <tbody><tr>
            <td style="width: 120px; ">
                css
            </td>
            <td>
                CSS class for the tab. The default value is &quot;Tab&quot;.
            </td>
        </tr>
        <tr>
            <td>
                csslabel
            </td>
            <td>
                CSS class for the tab title. The default value is &quot;TabLabel&quot;.
            </td>
        </tr>
        <tr>
            <td>elements[]
            </td>
            <td>
                Array of panels.
            </td>
        </tr>
        <tr>
            <td>
                label
            </td>
            <td>
                Tab title.
            </td>
        </tr>
        </tbody></table>
</section>

<section id="sample">

    <h2>Sample UI-models</h2>

    <p>UI-model for a task list:</p>

    <iframe style="width:100%;height:300px" src="../js/ui-models/apps/todo.js"></iframe>


    <p>UI-model for an addressbook:</p>

    <iframe style="width:100%;height:300px" src="../js/ui-models/apps/contacts.js"></iframe>

</section>


<p><br/>evolutility.js at <a href="https://github.com/evoluteur/evolutility" target="download">GitHub</a></p>

<br/><br/>
<div class="footer">&#169; 2014 Olivier Giulieri</div>
</body>

</html>